<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Рекурсия и стек</title>
		<link rel="icon" href="/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="/style.css">
	</head>
	<body>
        <a href="../index.html">Назад</a>

		<!-- //1 -->
		<script>			
			"use strict"

			let company = { // тот же самый объект, сжатый для краткости
				sales: [{name: 'John', salary: 1000}, {name: 'Alice', salary: 600 }],
				development: {
					sites: [{name: 'Peter', salary: 2000}, {name: 'Alex', salary: 1800 }],
					internals: [{name: 'Jack', salary: 1300}]
				}
			};

			function sumSalaries(department) {
				if (Array.isArray(department)) { // случай (1)
					return department.reduce((prev, current) => prev + current.salary, 0); // сумма элементов массива
				} else { // случай (2)
					let sum = 0;
					for (let subdep of Object.values(department)) {
					sum += sumSalaries(subdep); // рекурсивно вызывается для подотделов, суммируя результаты
					}
					return sum;
				}
			}

			alert(sumSalaries(company)); // 6700

			//alert(sumTo(1)); //1
			//alert(sumTo(2)); //2 + 1 = 3
			//sumTo(3); 3 + 2 + 1 = 6
			//sumTo(4); // 4 + 3 + 2 + 1 = 10
			//alert(sumTo(100)); // = 100 + 99 + ... + 2 + 1 = 5050

			//Решение 1
			/*
			function sumTo(num) {
				let sum = 0;
				for (let i = 1; i <= num; i++) {
					sum += i;
				}
				return sum;
			}
			*/

			//Решение 2
			
			function sumTo(num) {
				if (num === 1) {
					return num;
				} else {
					return num + sumTo(num - 1);
				}
			}
			

			//Решение 3
			/*
			function sumTo(num) {
				return (1 + num) / 2 * num;
			}
			*/
		</script>

		<!-- //2 -->
		<script>			

			//alert(factorial(1)); //1
			//alert(factorial(5)); //120

			function factorial(num) {
				return (num === 1) ? num : num * factorial(num - 1);
			}

		</script>
		
		<!-- //3 -->
		<script>			

			//alert(fib(2)); //2
			//alert(fib(7)); //13
			//alert(fib(77)); //5527939700884757

			//Через рекурсию
			/*
			function fib(num) {
				if (num === 0) {
					return 0;
				} else if (num === 1) {
					return 1;
				} else {
					return fib(num - 1) + fib(num - 2);
				}		
			}
			*/

			//Через итерацию
			function fib(num) {
				let a = 1;
				let b = 1;
				for (let i = 3; i <= num; i++) {
					let c = a + b;
					a = b;
					b = c;
				}
				
				return b;
			}

		</script>

		<!-- //4 -->
		<script>			

			let list = {
				value: 1,
				next: {
					value: 2,
					next: {
						value: 3,
						next: {
							value: 4,
							next: null
						}
					}
				}
			};

			//printList(list);

			//Цикл
			/*
			function printList(list) {
				let tmp = list;

				while(tmp) {
					alert(tmp.value);
					tmp = tmp.next;
				}
			}
			*/

			//Рекурсия
			function printList(list) {
				alert(list.value);

				if (list.next) {
					printList(list.next);
				}
			}

		</script>

		<!-- //5 -->
		<script>			

			printListEnd(list);

			//Цикл
			function printListEnd(list) {
				let tmp = list;
				let arrList = [];

				while(tmp) {
					arrList.push(tmp.value);
					tmp = tmp.next;
				}

				for (let i = arrList.length - 1; i >= 0; i--) {
    				alert( arrList[i] );
  				}
			}

			//Рекурсия
			/*
			function printListEnd(list) {

				if (list.next) {
					printListEnd(list.next);
				}

				alert(list.value);
			}
			*/
		</script>

	</body>
</html>
